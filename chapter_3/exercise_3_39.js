// 练习 3.39

let x = 10;

const s = make_serializer();

concurrent_execute(
  // T1
  () => {
    x = s(() => x * x)();
  },
  // T2
  s(() => {
    x = x + 1;
  }),
);

// T1取值的过程不能交错执行，但是取值和赋值之间还可以，所以还剩三种可能
// T1_取值、T1_赋值、T2_执行 101
// T2_执行、T1_取值、T1_赋值 121
// T1_取值、T2_执行、T1_赋值 100
